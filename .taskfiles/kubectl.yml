---
version: "3"

tasks:
  taints:
    desc: Set default taints for our k8s nodes
    cmds:
      - kubectl taint --overwrite=true nodes k8s-0 node-role.kubernetes.io/master:NoSchedule
      - kubectl taint --overwrite=true nodes k8s-1 node-role.kubernetes.io/master:NoSchedule
      - kubectl taint --overwrite=true nodes k8s-2 node-role.kubernetes.io/master:NoSchedule
      - kubectl taint --overwrite=true nodes k8s-longhorn-0 node-role.kubernetes.io/longhorn:NoSchedule
      - kubectl taint --overwrite=true nodes k8s-longhorn-1 node-role.kubernetes.io/longhorn:NoSchedule
      - kubectl taint --overwrite=true nodes k8s-longhorn-2 node-role.kubernetes.io/longhorn:NoSchedule
  labels:
    desc: Set default labels for our k8s nodes
    cmds:
      - kubectl label --overwrite=true nodes k8s-longhorn-0 node.longhorn.io/create-default-disk=true
      - kubectl label --overwrite=true nodes k8s-longhorn-1 node.longhorn.io/create-default-disk=true
      - kubectl label --overwrite=true nodes k8s-longhorn-2 node.longhorn.io/create-default-disk=true
      - kubectl label --overwrite=true nodes k8s-longhorn-0 node-role.kubernetes.io/longhorn=true
      - kubectl label --overwrite=true nodes k8s-longhorn-1 node-role.kubernetes.io/longhorn=true
      - kubectl label --overwrite=true nodes k8s-longhorn-2 node-role.kubernetes.io/longhorn=true
